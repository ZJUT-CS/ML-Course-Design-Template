# 课题 3：城市市场细分与房源聚类

> 提示：本课题主要练习无监督学习与业务市场细分，非常适合作为“基础难度”选题。  
> 通用规范（EDA、Train/Val/Test、Git、报告撰写等）请参考课程总 README。

---

## 一、课题背景与核心问题

在同一个城市中，Airbnb 房源并不是“同质”的：  
- 有的主打高价核心商圈小户型；  
- 有的适合家庭度假；  
- 有的承担长期低价住宿需求。

本课题希望利用聚类算法，将城市内房源划分为若干“类型 / 细分市场（segment）”，并给每一类起一个业务上可理解的名字，为后续运营和定价策略提供参考。

---

## 二、数据字段建议

数据表：**Listings Data**

示例特征来源：

- **房源属性**  
  `listing_type, room_type, guests, bedrooms, baths, min_nights, amenities, instant_book, professional_management`

- **价格与表现**  
  `ttm_avg_rate, ttm_occupancy, ttm_revpar, l90d_avg_rate, l90d_occupancy`

- **口碑**  
  `rating_overall, rating_cleanliness, rating_location, num_reviews`

- **地理位置**  
  `latitude, longitude, city`

---

## 三、必做任务

### 1. 特征选择与构造

1. 选定一个城市（`city`），过滤该城市的全部 `listings`；  
2. 选取 10–20 个适合聚类的特征（可来自规模、价格、评分、表现等维度）；  
3. 对特征进行必要预处理：
   - 数值特征：标准化（如 z-score）；  
   - 类别特征：one-hot 编码或其他合理编码方法；

4. 处理高维 `amenities` 字段：
   - 可以简化为：
     - 总设施数量；
     - 若干关键设施的布尔变量（如 `has_wifi, has_kitchen, has_washer` 等）。

> 要求说明：为何选这些特征？是否考虑了“容易被极端值影响”的字段？

### 2. 聚类建模

至少完成：

1. 使用 **KMeans**（至少一个 k 值）；  
2. 另外至少一种聚类方法，如：
   - 高斯混合模型（GMM）；  
   - 层次聚类（Hierarchical Clustering）。

使用轮廓系数（silhouette score）等指标辅助选择合适的聚类数 k，并在报告中展示相关结果或表格。

### 3. 聚类效果分析与可视化

对每一个 cluster，至少完成：

1. 统计该 cluster 在关键特征上的 **均值 / 中位数 / 分布**，例如：  
   - 价格、RevPAR、评分、可容纳人数、距离市中心等；
2. 使用箱线图或柱状图，展示各 cluster 之间在某些关键特征上的差异；
3. 使用地理位置可视化：
   - 在城市地图背景或简化坐标图上，将不同 cluster 的房源以不同颜色标示（基于 `latitude, longitude`）。

在观察结果后，检查是否出现：

- 所有 cluster 的特征分布非常接近，聚类效果不明显；  
- 某些 cluster 样本数极少，可能只是“噪声点”或异常值。

### 4. 市场细分命名与业务画像

为每一类 cluster：

1. 总结 3–5 条关键特征（价格水平、地理位置、房源大小、评分水平等），用自然语言描述；
2. 给出一个“业务上可理解的名字”，例如：
   - “高价核心商圈小户型”；  
   - “家庭度假型大户型”；  
   - “郊区长租 / 低价型”；  
   - “商务短住型单间”等。

> 要求该部分用“运营 / 产品经理能看懂”的语言撰写，而非纯技术术语堆叠。

---

## 四、选做任务（加分项）

- **特征版本对比**  
  - 比较两种聚类方案：  
    1. 只使用“静态属性 + 口碑”（规模、设施、评分）；  
    2. 在此基础上额外加入“表现指标”（RevPAR / occupancy 等）；  
  - 观察两种方案得到的 cluster 是否明显不同。

- **与专业运营的关系**  
  - 以 `superhost` 或 `professional_management` 作为标签，统计不同 cluster 中的占比；  
  - 讨论：专业运营房源更集中在哪些细分市场？这对平台有什么启示？

- **降维可视化**  
  - 使用 PCA / UMAP / t-SNE 等方法，将高维特征降到 2D；  
  - 在降维平面上用不同颜色标出 cluster，帮助直观理解类间结构。
