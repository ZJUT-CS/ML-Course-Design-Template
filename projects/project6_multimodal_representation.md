# 课题 6：多模态房源表示——结构化特征 + 文本标题/设施描述

> 提示：本课题适合对“文本表示 + 结构化特征融合”感兴趣的同学，工程量略大，建议作为“中等难度 / 进阶”选题。  
> 通用规范（EDA、Train/Val/Test、Git、报告撰写等）请参考课程总 README。

---

## 一、课题背景与核心问题

一个房源在平台上的呈现方式，往往包括：

- 结构化字段：城市、房型、价格、可住人数、评分等；  
- 文本字段：房源标题（listing_name）、设施描述（amenities）等。

问题：  
- 仅用结构化字段、仅用文本字段，以及两者结合，哪种表示更有利于预测房源表现？  
- 文本信息（标题和设施描述）是否真的提供了额外的预测价值？

---

## 二、数据字段建议

数据表：**Listings Data**

- 文本相关：
  - `listing_name`（房源标题）  
  - `amenities`（设施列表）
- 结构化字段：
  - `listing_type, room_type, guests, bedrooms, baths, min_nights, superhost, professional_management` 等
  - 表现相关：`ttm_avg_rate, ttm_revpar, ttm_occupancy` 等

---

## 三、必做任务

### 1. 统一预测任务定义

为便于对比，统一设定一个二分类任务，例如：

- 预测房源是否为“高 RevPAR 房源”：  
  - 以某个城市的数据为例，按 `ttm_revpar` 分位数划分：  
    - top 25% 标记为 1（高 RevPAR）；  
    - 其余标记为 0（非高 RevPAR）。

> 若你们组同时做了课题 1，可与那边的“高收益定义”保持一致。

### 2. 三种特征构造方案

需要构造三套特征向量：

1. **结构化特征（Structured）**
   - 数值特征：价格、人数、评分、RevPAR 以外的相关字段；
   - 类别特征：房型、listing_type 等，通过 one-hot 编码；
   - 对数值特征建议做标准化。

2. **文本特征（Text-only）**

   至少完成一种简单方案：

   - **必做：** 使用 TF-IDF / Bag-of-Words 等方法对  
     - `listing_name`，以及  
     - 适当预处理后的 `amenities` 文本  
     进行向量化（可拼接成一个文本字段）。

   可选进阶：

   - 使用预训练文本 embedding（如 sentence-BERT 等），将标题或标题+设施映射为向量。

3. **融合特征（Structured + Text）**
   - 将结构化特征向量与文本特征向量简单拼接；
   - 注意控制维度（如文本向量维度不宜过大，以免训练困难）。

> 要求在报告中说明每一种特征构造的具体步骤和参数设置（如 TF-IDF 的 max_features 等）。

### 3. 模型训练与性能对比

为公平比较，建议对三种特征方案使用 **同一种模型结构**，例如：

- 传统模型：Logistic Regression / XGBoost；  
- 或简单神经网络（MLP）。

至少完成：

1. 对三种特征方案分别训练模型；  
2. 在同一划分的验证集 / 测试集上，比较：
   - Accuracy、F1、AUC 等指标（至少 2 个）；  
3. 对比结果并讨论：
   - 文本特征相对于纯结构化特征带来了多少性能提升？  
   - 融合特征是否优于单一模态？

---

## 四、选做任务（加分项）

1. **嵌入空间可视化**  
   - 对文本 embedding 或结构化特征进行降维（PCA / UMAP / t-SNE）；  
   - 可视化不同类别（高 RevPAR vs 非高 RevPAR）在嵌入空间中的分布，观察是否分离明显。

2. **顶级房源文案模式挖掘**  
   - 对高 RevPAR 房源的 `listing_name + amenities` 进行简单挖掘：  
     - 词频统计、关键词提取；  
     - 或使用 LLM 对这些文本做摘要，归纳出常见模式（如强调景观、交通、适合家庭等）。

3. **代价–收益分析**  
   - 在报告中讨论：  
     - 文本特征带来的性能提升是否值得其实现成本？  
     - 若只提升很小，但工程复杂度很高，在真实业务中是否有必要投入？
